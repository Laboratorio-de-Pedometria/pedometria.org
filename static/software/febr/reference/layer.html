<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get 'layer' table — layer • febr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get 'layer' table — layer"><meta property="og:description" content="Download data from the 'layer' (&quot;camada&quot;) table of one or more datasets published in
the Data Repository of the Brazilian Soil. This
table includes data such as sampling depth, horizon designation, and variables such as pH, carbon
and clay content, and much more."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">febr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.9.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/febr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Referência</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/laboratorio-de-pedometria/febr-package/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get 'layer' table</h1>
    <small class="dont-index">Fonte: <a href="https://github.com/laboratorio-de-pedometria/febr-package/blob/HEAD/R/layer.R" class="external-link"><code>R/layer.R</code></a></small>
    <div class="hidden name"><code>layer.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Download data from the 'layer' ("camada") table of one or more datasets published in
the <a href="https://www.pedometria.org/febr/" class="external-link">Data Repository of the Brazilian Soil</a>. This
table includes data such as sampling depth, horizon designation, and variables such as pH, carbon
and clay content, and much more.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">layer</span><span class="op">(</span>
  <span class="va">data.set</span>,
  <span class="va">variable</span>,
  stack <span class="op">=</span> <span class="cn">FALSE</span>,
  missing <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>depth <span class="op">=</span> <span class="st">"keep"</span>, data <span class="op">=</span> <span class="st">"keep"</span><span class="op">)</span>,
  standardization <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>plus.sign <span class="op">=</span> <span class="st">"keep"</span>, plus.depth <span class="op">=</span> <span class="fl">2.5</span>, lessthan.sign <span class="op">=</span> <span class="st">"keep"</span>,
    lessthan.frac <span class="op">=</span> <span class="fl">0.5</span>, repetition <span class="op">=</span> <span class="st">"keep"</span>, combine.fun <span class="op">=</span> <span class="st">"mean"</span>, transition <span class="op">=</span> <span class="st">"keep"</span>,
    smoothing.fun <span class="op">=</span> <span class="st">"mean"</span>, units <span class="op">=</span> <span class="cn">FALSE</span>, round <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,
  harmonization <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>harmonize <span class="op">=</span> <span class="cn">FALSE</span>, level <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,
  progress <span class="op">=</span> <span class="cn">TRUE</span>,
  verbose <span class="op">=</span> <span class="cn">TRUE</span>,
  febr.repo <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data.set</dt>
<dd><p>Character vector indicating the identification code of one or more data sets.
Use <code>data.set = "all"</code> to download all data sets.</p></dd>
<dt>variable</dt>
<dd><p>(optional) Character vector indicating one or more variables. Accepts only
general identification codes, e.g. <code>"ferro"</code> and <code>"carbono"</code>. If missing, then a set of standard
identification variables is downloaded. Use <code>variable = "all"</code> to download all variables. See
‘Details’ for more information.</p></dd>
<dt>stack</dt>
<dd><p>(optional) Logical value indicating if tables from different datasets should be
stacked on a single table for output. Requires <code>standardization = list(units = TRUE)</code> -- see
below. Defaults to <code>stack = FALSE</code>, the output being a list of tables.</p></dd>
<dt>missing</dt>
<dd><p>(optional) List with named sub-arguments indicating what should be done with a
layer missing data on sampling depth, <code>depth</code>, or data on variable(s), <code>data</code>. Options are
<code>"keep"</code> (default) and <code>"drop"</code>.</p></dd>
<dt>standardization</dt>
<dd><p>(optional) List with named sub-arguments indicating how to perform data
#' standardization.</p><ul><li><p><code>plus.sign</code> Character string indicating what should be done with the plus sign (<code>+</code>)
commonly used along with the inferior limit of the bottom layer of an observation. Options are
<code>"keep"</code> (default), <code>"add"</code>, and <code>"remove"</code>.</p></li>
<li><p><code>plus.depth</code> Numeric value indicating the depth increment (in centimeters) when processing
the plus sign (<code>+</code>) with <code>plus.sign = "add"</code>. Defaults to <code>plus.depth = 2.5</code>.</p></li>
<li><p><code>lessthan.sign</code> Character string indicating what should be done with the less-than sign
(<code>&lt;</code>) used to indicate that the value of a variable is below the lower limit of detection.
Options are <code>"keep"</code> (default), <code>"subtract"</code>, and <code>"remove"</code>.</p></li>
<li><p><code>lessthan.frac</code> Numeric value between 0 and 1 (a fraction) by which the lower limit of
detection should be subtracted when <code>lessthan.sign = "subtract"</code>. Defaults to
<code>lessthan.frac = 0.5</code>, i.e. subtract 50\<!-- % from the lower limit of detection. --></p></li>
<li><p><code>repetition</code> Character string indicating what should be done with repetitions, i.e.
repeated measurements of layers in an observation. Options are <code>"keep"</code> (default) and
<code>"combine"</code>. In the latter case, it is recommended to set <code>lessthan.sign = "subtract"</code> or
<code>lessthan.sign = "remove"</code>.</p></li>
<li><p><code>combine.fun</code> Character string indicating the function that should be used to combine
repeated measurements of layers in an observation when <code>repetition = "combine"</code>. Options are
<code>"mean"</code> (default), <code>"min"</code>, <code>"max"</code>, and <code>"median"</code>.</p></li>
<li><p><code>transition</code> Character string indicating what should be done about the wavy and irregular
transition between subsequent layers in an observation. Options are <code>"keep"</code> (default) and
<code>"smooth"</code>.</p></li>
<li><p><code>smoothing.fun</code> Character string indicating the function that should be used to smooth wavy
and irregular transitions between subsequent layers in an observation when
<code>transition = "smooth"</code>. Options are <code>"mean"</code> (default), <code>"min"</code>, <code>"max"</code>, and <code>"median"</code>.</p></li>
<li><p><code>units</code> Logical value indicating if the measurement unit(s) of the continuous variable(s)
should be converted to the standard measurement unit(s). Defaults to <code>units = FALSE</code>, i.e. no
conversion is performed. See <code><a href="dictionary.html">dictionary()</a></code> for more information.</p></li>
<li><p><code>round</code> Logical value indicating if the values of the continuous variable(s) should be
rounded to the standard number of decimal places. Requires <code>units = TRUE</code>. Defaults to
<code>round = FALSE</code>, i.e. no rounding is performed. See <code><a href="dictionary.html">dictionary()</a></code> for more information.</p></li>
</ul></dd>
<dt>harmonization</dt>
<dd><p>(optional) List with named sub-arguments indicating if and how to perform
data harmonization.</p><ul><li><p><code>harmonize</code> Logical value indicating if data should be harmonized. Defaults to
<code>harmonize = FALSE</code>, i.e. no harmonization is performed.</p></li>
<li><p><code>level</code> Integer value indicating the number of levels of the identification code of the
variable(s) that should be considered for harmonization. Defaults to <code>level = 2</code>. See
‘Details’ for more information.</p></li>
</ul></dd>
<dt>progress</dt>
<dd><p>(optional) Logical value indicating if a download progress bar should be displayed.</p></dd>
<dt>verbose</dt>
<dd><p>(optional) Logical value indicating if informative messages should be displayed. Generally
useful to identify datasets with inconsistent data. Please report to <a href="mailto:febr-forum@googlegroups.com">febr-forum@googlegroups.com</a>
if you find any issue.</p></dd>
<dt>febr.repo</dt>
<dd><p>(optional) Defaults to the remote file directory of the Federal University of
Technology - Paraná at <a href="https://cloud.utfpr.edu.br/index.php/s/Df6dhfzYJ1DDeso" class="external-link">https://cloud.utfpr.edu.br/index.php/s/Df6dhfzYJ1DDeso</a>.
Alternatively, a local directory path can be informed if the user has a local copy of the data
repository.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A <code>list</code> of <code>data.frame</code>s or a <code>data.frame</code> with, possibly standardize or harmonized,
data of the chosen variable(s) of the chosen dataset(s).</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    
<div class="section">
<h3 id="default-variables">Default variables<a class="anchor" aria-label="anchor" href="#default-variables"></a></h3>
<p>Default variables (fields) present in the 'layer' table are as follows:</p><ul><li><p><code>dataset_id</code>. Identification of the dataset in FEBR to which an observation belongs.</p></li>
<li><p><code>evento_id_febr</code>. Identification code of an observation in a dataset.</p></li>
<li><p><code>camada_id</code>. Sequential layer number, from top to bottom.</p></li>
<li><p><code>camada_altid</code>. Layer designation according to some standard description guide.</p></li>
<li><p><code>amostra_id</code>. Laboratory number of a sample.</p></li>
<li><p><code>profund_sup</code>. Upper boundary of a layer (cm).</p></li>
<li><p><code>profund_inf</code>. Lower boundary of a layer (cm).</p></li>
</ul><p>Further details about the content of the default variables (fields) can be found in
<a href="https://docs.google.com/document/d/1Bqo8HtitZv11TXzTviVq2bI5dE6_t_fJt0HE-l3IMqM" class="external-link">https://docs.google.com/document/d/1Bqo8HtitZv11TXzTviVq2bI5dE6_t_fJt0HE-l3IMqM</a>
(in Portuguese).</p>
</div>
<div class="section">
<h3 id="harmonization">Harmonization<a class="anchor" aria-label="anchor" href="#harmonization"></a></h3>
<p>Data harmonization consists of converting the values of a variable determined using some method
<em>B</em> so that they are (approximately) equivalent to the values that would have been obtained if
the standard method <em>A</em> had been used instead. For example, converting carbon content values
obtained using a wet digestion method to the standard dry combustion method is data
harmonization.</p>
<p>A heuristic data harmonization procedure is implemented in the <strong>febr</strong> package. It consists of
grouping variables based on a chosen number of levels of their identification code. For example,
consider a variable with an identification code composed of four levels, <code>aaa_bbb_ccc_ddd</code>, where
<code>aaa</code> is the first level and <code>ddd</code> is the fourth level. Now consider a related variable,
<code>aaa_bbb_eee_fff</code>. If the harmonization is to consider all four coding levels (<code>level = 4</code>),
then these two variables will remain coded as separate variables. But if <code>level = 2</code>, then both
variables will be re-coded as <code>aaa_bbb</code>, thus becoming the same variable.</p>
</div>

    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="readFEBR.html">readFEBR()</a></code>, <code><a href="observation.html">observation()</a></code>, <code><a href="dictionary.html">dictionary()</a></code>, <code><a href="unit.html">unit()</a></code></p></div>
    </div>
    <div id="author">
    <h2>Autor</h2>
    <p>Alessandro Samuel-Rosa <a href="mailto:alessandrosamuelrosa@gmail.com">alessandrosamuelrosa@gmail.com</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">layer</span><span class="op">(</span>data.set <span class="op">=</span> <span class="st">"ctb0003"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 
  |                                                                            
  |                                                                      |   0%</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Downloading ctb0003-camada...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 
  |                                                                            
  |======================================================================| 100%</span>
<span class="r-in"></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"><span class="co"># Download two data sets and standardize units</span></span>
<span class="r-in"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">layer</span><span class="op">(</span></span>
<span class="r-in">  data.set <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"ctb000"</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">5</span>, sep <span class="op">=</span> <span class="st">""</span><span class="op">)</span>,</span>
<span class="r-in">  variable <span class="op">=</span> <span class="st">"carbono"</span>, stack <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span class="r-in">  standardization <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>units <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Try to download a data set that is not available yet</span></span>
<span class="r-in"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">layer</span><span class="op">(</span>data.set <span class="op">=</span> <span class="st">"ctb0020"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Try to download a non existing data set</span></span>
<span class="r-in"><span class="co"># res &lt;- observation(data.set = "ctb0000")</span></span>
<span class="r-in"><span class="op">}</span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Conteúdo</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Desenvolvido por Alessandro Samuel-Rosa, Taciara Zborowski Horst, Universidade Federal de Santa Maria, Universidade Tecnológica Federal do Paraná.</p>
</div>

<div class="pkgdown">
  <p></p><p>Página construída com <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

      </footer></div>

  


  

  </body></html>

